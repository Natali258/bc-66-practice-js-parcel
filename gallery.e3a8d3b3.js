!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r),r.register;var i=r("h6c0i"),a=r("dIxxU");a.default.defaults.baseURL="https://api.unsplash.com",a.default.defaults.headers.common.Authorization="Client-ID 4dc0c9edd3f8399861773bf78562a506e26384e3c5d582c06359e3e1c4b70c33";let o=async(e,t)=>{let{data:n}=await (0,a.default).get("/search/photos",{params:{query:e,page:t,per_page:20,color:"black_and_white",orientation:"portrait"}});return n},s=e=>e.map(({urls:e,alt_description:t})=>`<li class="gallery__item">
    <img src="${e.small}" alt="${t}" class="gallery-img">
</li>`).join("");var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},c=function(){function e(e){void 0===e&&(e={}),this.opts=l(l({},d),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),p(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",r="none";!0===t.shadow?r="0 2px 4px #000":"string"==typeof t.shadow&&(r=t.shadow);for(var i=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=e.split(",");r<i.length;r++){var a=i[r].match(t);if(null!==a){var o=+a[2],s=+a[5],l=a[4],d=a[7];0!==o||l||(l=d),0!==s||d||(d=l),l===d&&n.push({prefix:a[1]||"",x:o,y:s,xUnits:l,yUnits:d,end:a[8]})}}return n}(r),a=0;a<t.lines;a++){var o=~~(360/t.lines*a+t.rotate),s=p(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:u(t.fadeColor,a),borderRadius:n,transformOrigin:"left",transform:"rotate("+o+"deg) translateX("+t.radius+"px)"}),l=a*t.direction/t.lines/t.speed;l-=1/t.speed;var d=p(document.createElement("div"),{width:"100%",height:"100%",background:u(t.color,a),borderRadius:n,boxShadow:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=function(e,t,n){var r=n*Math.PI/180,i=Math.sin(r),a=Math.cos(r);return[Math.round((e*a+t*i)*1e3)/1e3,Math.round((-e*i+t*a)*1e3)/1e3]}(i.x,i.y,t);n.push(i.prefix+a[0]+i.xUnits+" "+a[1]+i.yUnits+i.end)}return n.join(", ")}(i,o),animation:1/t.speed+"s linear "+l+"s infinite "+t.animation});s.appendChild(d),e.appendChild(s)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function p(e,t){for(var n in t)e.style[n]=t[n];return e}function u(e,t){return"string"==typeof e?e:e[t%e.length]}let h=document.querySelector(".js-backdrop"),f=new c({lines:9,length:49,width:16,radius:47,scale:.9,corners:1,speed:1.8,rotate:53,animation:"spinner-line-shrink",direction:1,color:"#b91313",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"}),m=()=>{h.classList.remove("is-hidden"),f.spin(h)},g=()=>{h.classList.add("is-hidden"),f.stop()},y=1,v="",w=document.querySelector(".js-search-form"),x=document.querySelector(".js-gallery"),b=new IntersectionObserver((e,t)=>{e.forEach(async e=>{if(e.isIntersecting){t.unobserve(e.target),y+=1,m();try{let e=await o(v,y),t=s(e.results);x.insertAdjacentHTML("beforeend",t),I(e.total)}catch(e){(0,i.Notify).failure(e.message)}finally{g()}}})},{root:null,rootMargin:"100px",threshold:1}),M=async e=>{e.preventDefault();let{value:t}=e.target.elements.query;if(!t){(0,i.Notify).failure("Please, input some text!");return}y=1,v=t,x.innerHTML="",m();try{let e=await o(v,y);if(0===e.total)throw Error("we not find any photos");let t=s(e.results);x.insertAdjacentHTML("beforeend",t),I(e.total)}catch(e){(0,i.Notify).failure(e.message)}finally{g()}};function I(e){if(y<Math.ceil(e/20)){let e=document.querySelector(".gallery__item:last-child");b.observe(e)}}w.addEventListener("submit",M)}();
//# sourceMappingURL=gallery.e3a8d3b3.js.map
