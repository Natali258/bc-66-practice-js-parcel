{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SCAaC,EAAY,SAACC,EAAOC,GAC/B,IACMC,EAAS,IAAIC,gBAAgB,CACjCH,QACAC,OACAG,SAAU,GACVC,MAAO,kBACPC,YAAa,WACbC,UAAW,gDAEb,OAAOC,MAAM,GAA6BC,OATzB,2BASQ,mBAAwBA,OAAPP,IAAUQ,MAAK,SAAAC,GACvD,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,OACvB,MAAM,IAAIC,MAAMH,EAAII,W,KCZXC,EAAe,SAAAC,GAC1B,OAAOA,EACJC,KACC,SAAAC,G,IAAGC,EAAID,EAAJC,KAAMC,EAAeF,EAAfE,gB,MACP,6CAC4BZ,OAApBW,EAAKE,MAAM,WAAyBb,OAAhBY,EAAgB,gC,IAG/CE,KAAK,G,EFJNC,EAAO,EACPC,EAAQ,GACNC,EAAOC,SAASC,cAAc,mBAC9BC,EAAUF,SAASC,cAAc,eACjCE,EAAcH,SAASC,cAAc,iBAiC3CF,EAAKK,iBAAiB,UA/BD,SAAAC,GACnBA,EAAEC,iBACF,IAAMC,EAAYF,EAAEG,OAAOC,SAASpC,MAA5BkC,MACHA,GAILV,EAAO,EACPC,EAAQS,EAERL,EAAQQ,UAAY,GACpBP,EAAYQ,UAAUC,IAAI,aAE1BxC,EAAU0B,EAAOD,GACdd,MAAK,SAAA8B,GACJ,GAAmB,IAAfA,EAAKC,MACP,MAAM,IAAI3B,MAAM,0BAElB,IAAM4B,EAAS1B,EAAawB,EAAKG,SACjCd,EAAQe,mBAAmB,YAAaF,GAEpClB,EAAOqB,KAAKC,KAAKN,EAAKC,MAAQ,KAChCX,EAAYQ,UAAUS,OAAO,Y,IAGhCC,OAAM,SAAAC,GACLpD,EAAAqD,OAAOC,QAAQF,EAAMG,SACrBtB,EAAYQ,UAAUC,IAAI,Y,KAvB5B1C,EAAAqD,OAAOC,QAAQ,2B,IA+CnBrB,EAAYC,iBAAiB,SAlBR,WAGnBhC,EAAU0B,EAFVD,GAAQ,GAGLd,MAAK,SAAA8B,GACJ,IAAME,EAAS1B,EAAawB,EAAKG,SACjCd,EAAQe,mBAAmB,YAAaF,GAEpClB,IAASqB,KAAKC,KAAKN,EAAKC,MAAQ,KAClCX,EAAYQ,UAAUC,IAAI,Y,IAG7BS,OAAM,SAAAC,GACLpD,EAAAqD,OAAOC,QAAQF,EAAMG,SACrBtB,EAAYQ,UAAUC,IAAI,Y","sources":["src/js/gallery/gallery.js","src/js/gallery/api.js","src/js/gallery/createMarkup.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { getPhotos } from './api';\nimport { createMarkup } from './createMarkup.js';\n\nlet page = 1;\nlet query = '';\nconst form = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nconst handleSubmit = e => {\n  e.preventDefault();\n  const { value } = e.target.elements.query;\n  if (!value) {\n    Notify.failure('Please, input some text!');\n    return;\n  }\n  page = 1;\n  query = value;\n\n  gallery.innerHTML = '';\n  btnLoadMore.classList.add('is-hidden');\n\n  getPhotos(query, page)\n    .then(data => {\n      if (data.total === 0) {\n        throw new Error('we not find any photos');\n      }\n      const markup = createMarkup(data.results);\n      gallery.insertAdjacentHTML('beforeend', markup);\n\n      if (page < Math.ceil(data.total / 20)) {\n        btnLoadMore.classList.remove('is-hidden');\n      }\n    })\n    .catch(error => {\n      Notify.failure(error.message);\n      btnLoadMore.classList.add('is-hidden');\n    });\n};\n\nform.addEventListener('submit', handleSubmit);\n\nconst handLoadMore = () => {\n  page += 1;\n\n  getPhotos(query, page)\n    .then(data => {\n      const markup = createMarkup(data.results);\n      gallery.insertAdjacentHTML('beforeend', markup);\n\n      if (page === Math.ceil(data.total / 20)) {\n        btnLoadMore.classList.add('is-hidden');\n      }\n    })\n    .catch(error => {\n      Notify.failure(error.message);\n      btnLoadMore.classList.add('is-hidden');\n    });\n};\n\nbtnLoadMore.addEventListener('click', handLoadMore);\n","export const getPhotos = (query, page) => {\n  const BASE_URL = 'https://api.unsplash.com';\n  const params = new URLSearchParams({\n    query,\n    page,\n    per_page: 20,\n    color: 'black_and_white',\n    orientation: 'portrait',\n    client_id: 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc',\n  });\n  return fetch(`${BASE_URL}/search/photos?${params}`).then(res => {\n    if (res.ok) return res.json();\n    throw new Error(res.statusText);\n  });\n};\n","export const createMarkup = photos => {\n  return photos\n    .map(\n      ({ urls, alt_description }) =>\n        `<li class=\"gallery__item\">\n    <img src=\"${urls.small}\" alt=\"${alt_description}\" class=\"gallery-img\">\n</li>`\n    )\n    .join('');\n};\n"],"names":["$h6c0i","parcelRequire","$85926e87d2851641$export$6b037c6982b42afc","query","page","params","URLSearchParams","per_page","color","orientation","client_id","fetch","concat","then","res","ok","json","Error","statusText","$8689ac6d41c4daaf$export$24783e9f3a24abe4","photos","map","param","urls","alt_description","small","join","$0dbcd879fe76ff60$var$page","$0dbcd879fe76ff60$var$query","$0dbcd879fe76ff60$var$form","document","querySelector","$0dbcd879fe76ff60$var$gallery","$0dbcd879fe76ff60$var$btnLoadMore","addEventListener","e","preventDefault","value","target","elements","innerHTML","classList","add","data","total","markup","results","insertAdjacentHTML","Math","ceil","remove","catch","error","Notify","failure","message"],"version":3,"file":"gallery.5b5dc32f.js.map"}