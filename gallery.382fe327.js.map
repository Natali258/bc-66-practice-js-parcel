{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAO,MAAMC,EAAY,CAACC,EAAOC,KAC/B,MACMC,EAAS,IAAIC,gBAAgB,C,MACjCH,E,KACAC,EACAG,SAAU,GACVC,MAAO,kBACPC,YAAa,WACbC,UAAW,gDAEb,OAAOC,MAAM,0CAA6BN,KAAUO,MAAKC,IACvD,GAAIA,EAAIC,GAAI,OAAOD,EAAIE,OACvB,MAAM,IAAIC,MAAMH,EAAII,WAAW,GAC/B,ECbSC,EAAeC,GACnBA,EACJC,KACC,EAACC,KAAEA,EAAIC,gBAAEA,KACP,6CACQD,EAAKE,eAAeD,mCAG/BE,KAAK,IFJV,IAAIC,EAAO,EACPC,EAAQ,GACZ,MAAMC,EAAOC,SAASC,cAAc,mBAC9BC,EAAUF,SAASC,cAAc,eACjCE,EAAcH,SAASC,cAAc,iBAiC3CF,EAAKK,iBAAiB,UA/BDC,IACnBA,EAAEC,iBACF,MAAMC,MAAEA,GAAUF,EAAEG,OAAOC,SAASlC,MAC/BgC,GAILV,EAAO,EACPC,EAAQS,EAERL,EAAQQ,UAAY,GACpBP,EAAYQ,UAAUC,IAAI,aAE1BtC,EAAUwB,EAAOD,GACdb,MAAK6B,IACJ,GAAmB,IAAfA,EAAKC,MACP,MAAM,IAAI1B,MAAM,0BAElB,MAAM2B,EAASzB,EAAauB,EAAKG,SACjCd,EAAQe,mBAAmB,YAAaF,GAEpClB,EAAOqB,KAAKC,KAAKN,EAAKC,MAAQ,KAChCX,EAAYQ,UAAUS,OAAO,YAAY,IAG5CC,OAAMC,IACLlD,EAAAmD,OAAOC,QAAQF,EAAMG,SACrBtB,EAAYQ,UAAUC,IAAI,YAAY,KAvBxCxC,EAAAmD,OAAOC,QAAQ,2BAwBb,IAuBNrB,EAAYC,iBAAiB,SAlBR,KACnBP,GAAQ,EAERvB,EAAUwB,EAAOD,GACdb,MAAK6B,IACJ,MAAME,EAASzB,EAAauB,EAAKG,SACjCd,EAAQe,mBAAmB,YAAaF,GAEpClB,IAASqB,KAAKC,KAAKN,EAAKC,MAAQ,KAClCX,EAAYQ,UAAUC,IAAI,YAAY,IAGzCS,OAAMC,IACLlD,EAAAmD,OAAOC,QAAQF,EAAMG,SACrBtB,EAAYQ,UAAUC,IAAI,YAAY,GACtC","sources":["src/js/gallery/gallery.js","src/js/gallery/api.js","src/js/gallery/createMarkup.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { getPhotos } from './api';\nimport { createMarkup } from './createMarkup.js';\n\nlet page = 1;\nlet query = '';\nconst form = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nconst handleSubmit = e => {\n  e.preventDefault();\n  const { value } = e.target.elements.query;\n  if (!value) {\n    Notify.failure('Please, input some text!');\n    return;\n  }\n  page = 1;\n  query = value;\n\n  gallery.innerHTML = '';\n  btnLoadMore.classList.add('is-hidden');\n\n  getPhotos(query, page)\n    .then(data => {\n      if (data.total === 0) {\n        throw new Error('we not find any photos');\n      }\n      const markup = createMarkup(data.results);\n      gallery.insertAdjacentHTML('beforeend', markup);\n\n      if (page < Math.ceil(data.total / 20)) {\n        btnLoadMore.classList.remove('is-hidden');\n      }\n    })\n    .catch(error => {\n      Notify.failure(error.message);\n      btnLoadMore.classList.add('is-hidden');\n    });\n};\n\nform.addEventListener('submit', handleSubmit);\n\nconst handLoadMore = () => {\n  page += 1;\n\n  getPhotos(query, page)\n    .then(data => {\n      const markup = createMarkup(data.results);\n      gallery.insertAdjacentHTML('beforeend', markup);\n\n      if (page === Math.ceil(data.total / 20)) {\n        btnLoadMore.classList.add('is-hidden');\n      }\n    })\n    .catch(error => {\n      Notify.failure(error.message);\n      btnLoadMore.classList.add('is-hidden');\n    });\n};\n\nbtnLoadMore.addEventListener('click', handLoadMore);\n","export const getPhotos = (query, page) => {\n  const BASE_URL = 'https://api.unsplash.com';\n  const params = new URLSearchParams({\n    query,\n    page,\n    per_page: 20,\n    color: 'black_and_white',\n    orientation: 'portrait',\n    client_id: 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc',\n  });\n  return fetch(`${BASE_URL}/search/photos?${params}`).then(res => {\n    if (res.ok) return res.json();\n    throw new Error(res.statusText);\n  });\n};\n","export const createMarkup = photos => {\n  return photos\n    .map(\n      ({ urls, alt_description }) =>\n        `<li class=\"gallery__item\">\n    <img src=\"${urls.small}\" alt=\"${alt_description}\" class=\"gallery-img\">\n</li>`\n    )\n    .join('');\n};\n"],"names":["$iQIUW","parcelRequire","$a367f199bd3db7bc$export$6b037c6982b42afc","query","page","params","URLSearchParams","per_page","color","orientation","client_id","fetch","then","res","ok","json","Error","statusText","$a11a825b3507d067$export$24783e9f3a24abe4","photos","map","urls","alt_description","small","join","$7c22851df2735a06$var$page","$7c22851df2735a06$var$query","$7c22851df2735a06$var$form","document","querySelector","$7c22851df2735a06$var$gallery","$7c22851df2735a06$var$btnLoadMore","addEventListener","e","preventDefault","value","target","elements","innerHTML","classList","add","data","total","markup","results","insertAdjacentHTML","Math","ceil","remove","catch","error","Notify","failure","message"],"version":3,"file":"gallery.382fe327.js.map"}